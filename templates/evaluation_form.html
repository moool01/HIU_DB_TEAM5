{% extends "layout.html" %}

{% block content %}
<div class="form-container">
    <h2>강의 평가 작성</h2>
    
    <!-- Flash Messages -->
    {% with messages = get_flashed_messages(with_categories=True) %}
    {% if messages %}
        <div class="flash-messages">
            {% for category, message in messages %}
                <div class="alert {{ category }}">{{ message }}</div>
                {% if category == 'warning' %}
                    <script>
                        alert("{{ message }}");
                    </script>
                {% endif %}
            {% endfor %}
        </div>
    {% endif %}
    {% endwith %}

    <form method="POST">
        {{ form.hidden_tag() }}

        <div class="form-group">
            <label for="lecture_title">{{ form.lecture_title.label }}</label>
            {{ form.lecture_title }}
        </div>

        <div class="form-group">
            <label for="professor_name">{{ form.professor_name.label }}</label>
            {{ form.professor_name }}
        </div>

        <div class="form-group">
            <label for="semester">{{ form.semester.label }}</label>
            {{ form.semester }}
        </div>

        <div class="form-group">
            <label for="rating">{{ form.rating.label }}</label>
            <div class="rating-container">
                <div class="stars">
                    {% for value in range(5, 0, -1) %}
                        <input type="radio" id="star{{ value }}" name="rating" value="{{ value }}" {% if form.rating.data == value %}checked{% endif %}>
                        <label for="star{{ value }}">&#9733;</label> <!-- ★ -->
                    {% endfor %}
                </div>
                <div class="rating-value">0/5</div>
            </div>
        </div>

        <div class="form-group">
            <label for="review">{{ form.review.label }}</label>
            {{ form.review }}
        </div>

        <!-- 과제 양 -->
        <div class="form-group">
            <label for="assignment_amount">{{ form.assignment_amount.label }}</label>
            <div class="inline-options">
                {% for subfield in form.assignment_amount %}
                    <input type="radio" id="{{ subfield.id }}" name="{{ subfield.name }}" value="{{ subfield.data }}" {{ subfield.checked and 'checked' }}>
                    <label for="{{ subfield.id }}">{{ subfield.label.text }}</label>
                {% endfor %}
            </div>
        </div>

        <!-- 조모임 -->
        <div class="form-group">
            <label for="group_work">{{ form.group_work.label }}</label>
            <div class="inline-options">
                {% for subfield in form.group_work %}
                    <input type="radio" id="{{ subfield.id }}" name="{{ subfield.name }}" value="{{ subfield.data }}" {{ subfield.checked and 'checked' }}>
                    <label for="{{ subfield.id }}">{{ subfield.label.text }}</label>
                {% endfor %}
            </div>
        </div>

        <!-- 성적의 관대함 -->
        <div class="form-group">
            <label for="grade_fairness">{{ form.grade_fairness.label }}</label>
            <div class="inline-options">
                {% for subfield in form.grade_fairness %}
                    <input type="radio" id="{{ subfield.id }}" name="{{ subfield.name }}" value="{{ subfield.data }}" {{ subfield.checked and 'checked' }}>
                    <label for="{{ subfield.id }}">{{ subfield.label.text }}</label>
                {% endfor %}
            </div>
        </div>

        <!-- 출석 방식 -->
        <div class="form-group">
            <label for="attendance_type">{{ form.attendance_type.label }}</label>
            <div class="inline-options">
                {% for subfield in form.attendance_type %}
                    <input type="radio" id="{{ subfield.id }}" name="{{ subfield.name }}" value="{{ subfield.data }}" {{ subfield.checked and 'checked' }}>
                    <label for="{{ subfield.id }}">{{ subfield.label.text }}</label>
                {% endfor %}
            </div>
        </div>

        <!-- 시험 횟수 -->
        <div class="form-group">
            <label for="exam_count">{{ form.exam_count.label }}</label>
            <div class="inline-options">
                {% for subfield in form.exam_count %}
                    <input type="radio" id="{{ subfield.id }}" name="{{ subfield.name }}" value="{{ subfield.data }}" {{ subfield.checked and 'checked' }}>
                    <label for="{{ subfield.id }}">{{ subfield.label.text }}</label>
                {% endfor %}
            </div>
        </div>

        <div class="form-group">
            {{ form.submit }}
        </div>
    </form>
</div>
{% endblock %}
